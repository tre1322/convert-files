<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>File Converter</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <style>
    body {
      background-color: #f8f9fa;
    }
    .upload-section {
      border: 2px dashed #6c757d;
      border-radius: 10px;
      padding: 20px;
      text-align: center;
      cursor: pointer;
      transition: background-color 0.2s ease;
      height: 100%;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }
    .upload-section.dragover {
      background-color: #e9ecef;
    }
    .file-input {
      display: none;
    }
    .upload-container {
      display: flex;
      flex-direction: column;
      height: 100%;
    }
    .upload-options {
      margin-top: 15px;
    }
    .equal-height {
      display: flex;
    }
  </style>
</head>
<body>
  <div class="container py-5">
    <h1 class="text-center mb-4">File Converter</h1>
    <div class="row equal-height g-4">
      <!-- Images Section -->
      <div class="col-md-6 d-flex">
        <div class="upload-container w-100">
          <div id="image-section" class="upload-section flex-grow-1">
            <input type="file" id="imageInput" class="file-input" accept="image/*" />
            <p>Drag & drop images here or <span class="text-primary">click to browse</span></p>
          </div>
          <div class="upload-options text-center">
            <label for="imageFormat" class="form-label">Convert To:</label>
            <select id="imageFormat" class="form-select">
              <option value="png">PNG</option>
              <option value="jpg">JPG</option>
              <option value="webp">WEBP</option>
              <option value="gif">GIF</option>
            </select>
            <button class="btn btn-primary mt-2 w-100" onclick="convertFile('image')">Convert Image</button>
          </div>
        </div>
      </div>

      <!-- Documents Section -->
      <div class="col-md-6 d-flex">
        <div class="upload-container w-100">
          <div id="document-section" class="upload-section flex-grow-1">
            <input type="file" id="documentInput" class="file-input" accept=".pdf,.doc,.docx,.txt" />
            <p>Drag & drop documents here or <span class="text-primary">click to browse</span></p>
          </div>
          <div class="upload-options text-center">
            <label for="documentFormat" class="form-label">Convert To:</label>
            <select id="documentFormat" class="form-select">
              <option value="pdf">PDF</option>
              <option value="docx">DOCX</option>
              <option value="txt">TXT</option>
            </select>
            <button class="btn btn-success mt-2 w-100" onclick="convertFile('document')">Convert Document</button>
          </div>
        </div>
      </div>
    </div> <!-- end row -->

    <!-- Data retention notice -->
    <div class="mt-4 text-center">
      <div class="alert alert-info d-inline-flex align-items-center gap-2 mb-0" role="status" style="max-width: 720px;">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-info-circle" viewBox="0 0 16 16" aria-hidden="true">
          <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"/>
          <path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533zM8 4.5a1 1 0 1 0 0-2 1 1 0 0 0 0 2"/>
        </svg>
        <span><strong>Privacy:</strong> Images and documents are automatically deleted from the server after <strong>30 minutes</strong>.</span>
      </div>
    </div>

  </div> <!-- end container -->

  <script>
    function setupUpload(sectionId, inputId) {
      const section = document.getElementById(sectionId);
      const input = document.getElementById(inputId);

      section.addEventListener("click", () => input.click());

      section.addEventListener("dragover", (e) => {
        e.preventDefault();
        section.classList.add("dragover");
      });

      section.addEventListener("dragleave", () => {
        section.classList.remove("dragover");
      });

      section.addEventListener("drop", (e) => {
        e.preventDefault();
        section.classList.remove("dragover");
        input.files = e.dataTransfer.files;
      });

      input.addEventListener("change", () => {
        console.log(input.files[0].name + " selected");
      });
    }

    function convertFile(type) {
      let input, format;
      if (type === "image") {
        input = document.getElementById("imageInput");
        format = document.getElementById("imageFormat").value;
      } else {
        input = document.getElementById("documentInput");
        format = document.getElementById("documentFormat").value;
      }

      if (!input.files.length) {
        alert("Please select a file first.");
        return;
      }

      alert(`Converting ${input.files[0].name} to ${format.toUpperCase()}...`);
      // TODO: Add backend upload + conversion request here
    }

    setupUpload("image-section", "imageInput");
    setupUpload("document-section", "documentInput");
  </script>
</body>
</html>
